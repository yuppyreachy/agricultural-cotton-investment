<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Elite Investor Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#0f0f0f;color:#fff;}

/* Sidebar */
.sidebar{
    position:fixed;width:250px;height:100vh;background:#111;padding:30px 20px;border-right:1px solid rgba(255,215,0,0.2);
}
.sidebar h2{color:gold;text-align:center;margin-bottom:30px;font-weight:700;}
.sidebar a{
    display:block;padding:12px;margin-bottom:10px;text-decoration:none;color:#ccc;border-radius:8px;transition:0.3s;
}
.sidebar a:hover{background:gold;color:#000;transform:translateX(5px);}

/* Main */
.main{margin-left:270px;padding:20px;display:flex;flex-wrap:wrap;gap:20px;justify-content:flex-start;}

/* Cards */
.card{
    background:linear-gradient(135deg,#222,#111);
    border-radius:15px;
    padding:15px;
    box-shadow:0 0 25px rgba(255,215,0,0.3);
    transition:0.3s;
}
.card:hover{box-shadow:0 0 35px rgba(255,215,0,0.5);transform:translateY(-2px);}

/* Profile Card */
.profile-card{display:flex;justify-content:space-between;align-items:center;gap:15px;}
.profile-left{display:flex;align-items:center;gap:15px;}
.profile-left img{width:80px;height:80px;border-radius:50%;border:2px solid gold;}
.profile-left .info h3{color:gold;margin-bottom:5px;font-size:18px;}
.profile-left .info p{color:#ccc;margin:2px 0;font-size:13px;}
.profile-right{text-align:center;background:linear-gradient(135deg,#222,#111);padding:15px;border-radius:12px;min-width:120px;box-shadow:0 0 20px rgba(255,215,0,0.4);}
.profile-right h4{color:#ffd700;margin-bottom:8px;font-size:14px;}
.profile-right p{color:#fff;margin:3px 0;font-size:13px;font-weight:500;}

/* Charts */
.chart-container{padding:15px;border-radius:15px;margin-bottom:20px;}
.chart-container h3{color:gold;margin-bottom:10px;}

/* Grid Lists */
.grid-list{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.grid-item{background:#1a1a1a;padding:10px;border-radius:12px;box-shadow:0 0 20px rgba(255,215,0,0.2);transition:0.3s;}
.grid-item:hover{box-shadow:0 0 30px rgba(255,215,0,0.4);transform:translateY(-2px);}
.grid-item h4{color:gold;margin-bottom:3px;font-size:14px;}
.grid-item p{color:#ccc;font-size:12px;}

/* Chat Column */
.chat-column{display:flex;flex-direction:column;gap:10px;max-height:400px;overflow-y:auto;}
.chat-message{background:#1a1a1a;padding:10px;border-radius:10px;box-shadow:0 0 15px rgba(255,215,0,0.2);}
.chat-message.user{border-left:3px solid #00ffea;}
.chat-message.admin{border-left:3px solid gold;}

/* Media & Updates Column */
.media-column, .updates-column, .slider-column{display:flex;flex-direction:column;gap:10px;max-height:400px;overflow-y:auto;}
.media-post, .update-post{background:#1a1a1a;padding:10px;border-radius:10px;box-shadow:0 0 15px rgba(255,215,0,0.2);}
.media-post h4, .update-post h4{color:gold;font-size:13px;margin-bottom:3px;}
.media-post p, .update-post p{color:#ccc;font-size:12px;}
.slider-column img{width:100%;border-radius:12px;object-fit:cover;margin-bottom:5px;}

/* Columns layout */
.column{flex:1;min-width:300px;display:flex;flex-direction:column;gap:15px;}
@media(max-width:1200px){.main{flex-direction:column;margin-left:0;}.sidebar{position:relative;width:100%;height:auto;}}
</style>
</head>
<body>

<div class="sidebar">
    <h2>ELITE INVESTOR</h2>
    <a href="/dashboard">Dashboard</a>
    <a href="/deposit">Deposit</a>
    <a href="/invest">Invest</a>
    <a href="/withdraw">Withdraw</a>
    <a href="/transactions">Transactions</a>
    <a href="/loan">Loan</a>
    <a href="/kyc">KYC</a>
    <a href="/settings">Settings</a>
    <a href="/about">About</a>
    <a href="/terms">Terms</a>
    <a href="/privacy">Privacy</a>
    <a href="/logout">Logout</a>
</div>

<div class="main">

    <!-- Left Column -->
    <div class="column">

        <!-- Profile Card -->
        <div class="card profile-card">
            <div class="profile-left">
                <img src="https://i.imgur.com/3VQX1Xu.png" alt="Profile">
                <div class="info">
                    <h3><%= user.fullname %></h3>
                    <p>Email: <%= user.email %></p>
                    <p>Balance: $<%= user.balance %></p>
                    <p>Profit: $<%= user.profit || 0 %></p>
                    <p>Welcome Bonus: $250</p>
                </div>
            </div>
            <div class="profile-right">
                <h4>Account Status</h4>
                <p><strong>KYC:</strong> <%= user.kyc_status ? "No ❌" : "Pending ⚠️" %></p>
                <p><strong>Loan Eligible:</strong> <%= user.loan_eligible ? "Yes ✅" : "No ❌" %></p>
                <p style="color:#ffd700;font-weight:700;">VIP Elite</p>
            </div>
        </div>

        <!-- Live ROI & Company Profit Chart -->
        <div class="card chart-container">
            <h3>Live ROI & Company Profits</h3>
            <canvas id="roiChart"></canvas>
        </div>

        <!-- Top Investors Grid -->
        <div class="card">
            <h3>Top Investors</h3>
            <div class="grid-list">
                <div class="grid-item"><h4>John D.</h4><p>ROI: 15%</p></div>
                <div class="grid-item"><h4>Sarah W.</h4><p>ROI: 14.5%</p></div>
                <div class="grid-item"><h4>Mike B.</h4><p>ROI: 13.9%</p></div>
                <div class="grid-item"><h4>Micheal R.</h4><p>ROI: 13.5%</p></div>
                <div class="grid-item"><h4>Alex K.</h4><p>ROI: 13%</p></div>
                <div class="grid-item"><h4>Linda P.</h4><p>ROI: 12.8%</p></div>
                <div class="grid-item"><h4>Kevin S.</h4><p>ROI: 12.5%</p></div>
                <div class="grid-item"><h4>Anna L.</h4><p>ROI: 12%</p></div>
                <div class="grid-item"><h4>Tom B.</h4><p>ROI: 11.8%</p></div>
            </div>
        </div>

        <!-- Investor Reviews Grid -->
        <div class="card">
            <h3>Investor Reviews</h3>
            <div class="grid-list">
                <div class="grid-item"><h4>John R</h4><p>Great platform for consistent returns!</p></div>
                <div class="grid-item"><h4>Dell M</h4><p>VIP support is amazing.</p></div>
                <div class="grid-item"><h4>May Ana</h4><p>Love the golden investment plans.</p></div>
                <div class="grid-item"><h4>Lady Sharon</h4><p>Charts are very helpful for tracking ROI.</p></div>
                <div class="grid-item"><h4>Teresa Palmer</h4><p>Highly recommended for serious investors.</p></div>
                <div class="grid-item"><h4>James K</h4><p>Excellent ROI insights!</p></div>
                <div class="grid-item"><h4>Linda R</h4><p>VIP support top-notch!</p></div>
                <div class="grid-item"><h4>Mark T</h4><p>Love the golden plans.</p></div>
                <div class="grid-item"><h4>Anna P</h4><p>Charts are very helpful.</p></div>
            </div>
        </div>

    </div>

    <!-- Right Column -->
    <div class="column">

        <!-- User/Admin Live Chat -->
        <div class="card chat-column">
            <h3>Live Chat</h3>
            <div class="chat-message user">Hello Admin, I need help with my investment.</div>
            <div class="chat-message admin">Hi John! How can I assist you today?</div>
            <div class="chat-message user">Can I upgrade my plan to VIP Elite?</div>
            <div class="chat-message admin">Absolutely, here are the steps...</div>
            <!-- Chat Column -->
             <div style="flex-basis:100%; margin-top:5px;">
    <input id="chatInput" type="text" placeholder="Type a message..." 
           style="width:100%; padding:10px; border-radius:10px; border:none; outline:none; font-size:14px;">
</div>

<div class="card chat-column" style="flex:1; min-width:250px; display:flex; flex-direction:column; gap:10px; height:500px; overflow-y:auto; padding:15px;">
    <h3 style="color:gold;">Live Chat</h3>
    <!-- Messages will appear here -->
</div>

        </div>

        <!-- Admin Media Posts -->
        <div class="card media-column">
            <h3>Admin Media Posts</h3>
            <div class="media-post"><h4>New Gold Investment Plan</h4><p>Launched this week for VIP Elite members!</p></div>
            <div class="media-post"><h4>Company Profits</h4><p>Reached $50M this quarter.</p></div>
            <div class="media-post"><h4>Weekly ROI Update</h4><p>VIP Elite investors earn extra 12% weekly.</p></div>
        </div>

        <!-- Picture Slider -->
        <div class="card slider-column">
            <h3>Gallery</h3>
            <img src="https://i.imgur.com/3VQX1Xu.png" alt="Slider 1">
            <img src="https://i.imgur.com/3VQX1Xu.png" alt="Slider 2">
            <img src="https://i.imgur.com/3VQX1Xu.png" alt="Slider 3">
        </div>

        <!-- New & Updates Column -->
        <div class="card updates-column">
            <h3>New & Updates</h3>
            <div class="update-post"><h4>Update 1</h4><p>VIP Elite plan upgraded this month.</p></div>
            <div class="update-post"><h4>Update 2</h4><p>New automated ROI system deployed.</p></div>
            <div class="update-post"><h4>Update 3</h4><p>Company reached $60M profits this quarter!</p></div>
        </div>

    </div>

</div>

<script>
// ROI & Company Profit Chart
const ctx = document.getElementById('roiChart').getContext('2d');
const roiChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Week 1','Week 2','Week 3','Week 4','Week 5','Week 6'],
        datasets: [
            {
                label: 'Company Profit ($M)',
                data: [10,12,13,14,14.5,15],
                borderColor: 'gold',
                backgroundColor: 'rgba(255,215,0,0.2)',
                tension:0.4,
                fill:true
            },
            {
                label: 'Live ROI (%)',
                data: [10,11,11.5,12,12.5,12],
                borderColor: '#00ffea',
                backgroundColor: 'rgba(0,255,234,0.2)',
                tension:0.4,
                fill:true
            }
        ]
    },
    options:{
        responsive:true,
        plugins:{legend:{labels:{color:'#fff'}}},
        scales:{y:{ticks:{color:'#fff'}},x:{ticks:{color:'#fff'}}}
    }
});
</script>
<script src="/socket.io/socket.io.js"></script>
<script>



// Send message on Enter
chatInput.addEventListener("keypress", e => {
    if(e.key === "Enter" && chatInput.value.trim() !== ""){
        socket.emit("chat message", chatInput.value.trim());
        chatInput.value = "";
    }
});

<div class="dashboard-cards">
  <div class="card">
    <h3>Live ROI</h3>
    <canvas id="roiChart" width="400" height="200"></canvas>
  </div>

  <div class="card">
    <h3>Company Profit</h3>
    <canvas id="profitChart" width="400" height="200"></canvas>
  </div>
</div>

// Listen for messages
socket.on("chat message", msg => {
    const div = document.createElement("div");
    div.classList.add("chat-message");
    div.classList.add(msg.sender); // user/admin
    div.style.padding = "8px";
    div.style.marginBottom = "6px";
    div.style.borderRadius = "10px";
    div.style.fontSize = "14px";
    div.style.background = msg.sender === "user" ? "rgba(255,215,0,0.2)" : "rgba(0,255,234,0.2)";
    div.style.color = "#fff";
    div.textContent = msg.sender.toUpperCase() + ": " + msg.text;
    chatColumn.appendChild(div);
    chatColumn.scrollTop = chatColumn.scrollHeight;
});
</script>
<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

// DOM elements
const chatColumn = document.querySelector(".chat-column");
const chatInput = document.getElementById("chatInput");

// Send message on Enter key
chatInput.addEventListener("keypress", e => {
    if(e.key === "Enter" && chatInput.value.trim() !== ""){
        socket.emit("chat message", chatInput.value.trim());
        chatInput.value = "";
    }
});

// Listen for incoming messages
socket.on("chat message", msg => {
    const div = document.createElement("div");
    div.classList.add("chat-message");
    div.classList.add(msg.sender); // user/admin styling
    div.style.padding = "8px";
    div.style.marginBottom = "6px";
    div.style.borderRadius = "10px";
    div.style.fontSize = "14px";
    div.style.background = msg.sender === "user" ? "rgba(255,215,0,0.2)" : "rgba(0,255,234,0.2)";
    div.style.color = "#fff";
    div.textContent = msg.sender.toUpperCase() + ": " + msg.text;
    chatColumn.appendChild(div);
    chatColumn.scrollTop = chatColumn.scrollHeight;
});
</script>
<!-- Socket.IO (for real-time updates) -->
<script src="/socket.io/socket.io.js"></script>

<!-- Chart.js (for the charts) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>

  

  // === Profit Chart ===
  const profitCtx = document.getElementById('profitChart').getContext('2d');
  const profitChart = new Chart(profitCtx, {
    type: 'line',
    data: { labels: [], datasets: [{ label: 'Profit ($)', borderColor: 'green', data: [], fill: true }] },
    options: { animation: false, responsive: true, scales: { y: { beginAtZero: true } } }
  });

  // Listen for live data from backend
  socket.on('liveData', (data) => {
    const time = new Date().toLocaleTimeString();

    // Update ROI chart
    if (roiChart.data.labels.length > 20) {
      roiChart.data.labels.shift();
      roiChart.data.datasets[0].data.shift();
    }
    roiChart.data.labels.push(time);
    roiChart.data.datasets[0].data.push(data.roi);
    roiChart.update();

    // Update Profit chart
    if (profitChart.data.labels.length > 20) {
      profitChart.data.labels.shift();
      profitChart.data.datasets[0].data.shift();
    }
    profitChart.data.labels.push(time);
    profitChart.data.datasets[0].data.push(data.profit);
    profitChart.update();
  });
     

  // Update charts with live data from backend
  socket.on('liveData', (data) => {
    const time = new Date().toLocaleTimeString();

   
    // Profit
    if (profitChart.data.labels.length > 20) {
      profitChart.data.labels.shift();
      profitChart.data.datasets[0].data.shift();
    }
    profitChart.data.labels.push(time);
    profitChart.data.datasets[0].data.push(data.profit);
    profitChart.update();
  });


  chatInput.addEventListener("keypress", e => {
    if(e.key === "Enter" && chatInput.value.trim() !== ""){
      socket.emit("chat message", chatInput.value.trim());
      chatInput.value = "";
    }
  });

  socket.on("chat message", msg => {
    const div = document.createElement("div");
    div.classList.add("chat-message");
    div.classList.add(msg.sender); // user/admin styling
    div.style.padding = "8px";
    div.style.marginBottom = "6px";
    div.style.borderRadius = "10px";
    div.style.fontSize = "14px";
    div.style.background = msg.sender === "user" ? "rgba(255,215,0,0.2)" : "rgba(0,255,234,0.2)";
    div.style.color = "#fff";
    div.textContent = msg.sender.toUpperCase() + ": " + msg.text;
    chatColumn.appendChild(div);
    chatColumn.scrollTop = chatColumn.scrollHeight;
  });
</script>



</body>
</html>
